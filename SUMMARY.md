# üéâ YakGo - –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π **full-stack** –ø—Ä–æ–µ–∫—Ç YakGo –¥–ª—è Telegram Mini App:

### üîß Backend (Node.js + Express + PostgreSQL)

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `backend/package.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ `backend/tsconfig.json` - TypeScript –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ `backend/prisma/schema.prisma` - **–ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î** (11 –º–æ–¥–µ–ª–µ–π)
- ‚úÖ `backend/prisma/seed.ts` - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–º–∞–≥–∞–∑–∏–Ω—ã, —Ç–æ–≤–∞—Ä—ã)
- ‚úÖ `backend/src/index.ts` - **–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** (Express + Socket.IO)
- ‚úÖ `backend/src/bot.ts` - Telegram –±–æ—Ç –¥–ª—è Mini App
- ‚úÖ `backend/src/middleware/auth.ts` - **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram**
- ‚úÖ `backend/src/utils/telegram.ts` - –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram initData
- ‚úÖ `backend/src/utils/prisma.ts` - Prisma –∫–ª–∏–µ–Ω—Ç
- ‚úÖ `backend/src/controllers/users.controller.ts` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ API
- ‚úÖ `backend/src/controllers/orders.controller.ts` - –ó–∞–∫–∞–∑—ã —É—Å–ª—É–≥ API
- ‚úÖ `backend/src/controllers/marketplace.controller.ts` - –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å API
- ‚úÖ `backend/src/routes/users.routes.ts` - Users —Ä–æ—É—Ç—ã
- ‚úÖ `backend/src/routes/orders.routes.ts` - Orders —Ä–æ—É—Ç—ã
- ‚úÖ `backend/src/routes/marketplace.routes.ts` - Marketplace —Ä–æ—É—Ç—ã
- ‚úÖ `backend/.env.example` - –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `backend/README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è backend

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏:**
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Telegram (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π!)
- üë§ **API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (–ø—Ä–æ—Ñ–∏–ª—å, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π/–ø—Ä–æ–¥–∞–≤—Ü–æ–≤)
- üöó **API –∑–∞–∫–∞–∑–æ–≤ —É—Å–ª—É–≥** (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–∏–Ω—è—Ç–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- üõí **API –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞** (—Ç–æ–≤–∞—Ä—ã, –º–∞–≥–∞–∑–∏–Ω—ã, –∫–æ—Ä–∑–∏–Ω–∞, –∑–∞–∫–∞–∑—ã)
- üìç **WebSocket** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üí∞ **–ë–∞–ª–∞–Ω—Å—ã** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º (–∫–æ–º–∏—Å—Å–∏—è 10%)
- üóÑÔ∏è **PostgreSQL** —Å Prisma ORM

### üé® Frontend (Next.js –∞–¥–∞–ø—Ç–∞—Ü–∏—è)

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ/—Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `src/lib/telegram.ts` - **Telegram SDK —É—Ç–∏–ª–∏—Ç—ã**
- ‚úÖ `src/lib/api.ts` - **API –∫–ª–∏–µ–Ω—Ç** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å backend
- ‚úÖ `src/context/AppContext.tsx` - **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è API** (–≤–º–µ—Å—Ç–æ localStorage!)
- ‚úÖ `src/app/layout.tsx` - –ü–æ–¥–∫–ª—é—á–µ–Ω Telegram WebApp SDK
- ‚úÖ `.env.local` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ —Å–∏–º—É–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ localStorage
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Mini App SDK
- ‚úÖ WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è real-time

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ `INSTALLATION.md` - **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è** –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- ‚úÖ `README.md` - –û–±–Ω–æ–≤–ª–µ–Ω —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ `backend/README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è backend API
- ‚úÖ `SUMMARY.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

1. **User** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Telegram ID, –±–∞–ª–∞–Ω—Å)
2. **DriverProfile** - –ü—Ä–æ—Ñ–∏–ª–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π (—É—Å–ª—É–≥–∏, —Ä–µ–π—Ç–∏–Ω–≥)
3. **SellerProfile** - –ü—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
4. **Order** - –ó–∞–∫–∞–∑—ã —É—Å–ª—É–≥ (—Å—Ç–∞—Ç—É—Å, —Ü–µ–Ω–∞, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
5. **Shop** - –ú–∞–≥–∞–∑–∏–Ω—ã
6. **Product** - –¢–æ–≤–∞—Ä—ã
7. **CartItem** - –ö–æ—Ä–∑–∏–Ω–∞
8. **MarketplaceOrder** - –ó–∞–∫–∞–∑—ã –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
9. **MarketplaceOrderItem** - –¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ
10. **DriverLocation** - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–æ–¥–∏—Ç–µ–ª–µ–π (real-time)

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç):

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ë–î
createdb yakgo

# 2. Backend
cd backend
npm install
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env (DATABASE_URL, TELEGRAM_BOT_TOKEN)
npm run prisma:generate
npm run prisma:push
npm run prisma:seed
npm run dev  # ‚Üí http://localhost:3001

# 3. Frontend (–Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)
cd ..
npm install
cp .env.local.example .env.local
npm run dev  # ‚Üí http://localhost:9002

# 4. Telegram –±–æ—Ç (–Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)
cd backend
npm run bot  # –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
```

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:
–°–º. **[INSTALLATION.md](./INSTALLATION.md)**

---

## üåê API Endpoints

### Users (`/api/users/*`)
- `GET /profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /profile` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `GET /balance` - –ë–∞–ª–∞–Ω—Å
- `POST /register-driver` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª—è
- `POST /register-seller` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞

### Orders (`/api/orders/*`)
- `POST /` - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
- `GET /my-orders` - –ú–æ–∏ –∑–∞–∫–∞–∑—ã
- `GET /available` - –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã (–¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π)
- `POST /:id/accept` - –ü—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑
- `POST /:id/complete` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑

### Marketplace (`/api/marketplace/*`)
- `GET /shops` - –°–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- `GET /products` - –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `POST /products` - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
- `GET /cart` - –ö–æ—Ä–∑–∏–Ω–∞
- `POST /cart` - –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
- `POST /orders` - –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑

---

## üîå WebSocket

### –°–æ–±—ã—Ç–∏—è:

**–û—Ç –≤–æ–¥–∏—Ç–µ–ª—è:**
```javascript
socket.emit('driver:location', { 
  driverId: '...', 
  latitude: 62.027, 
  longitude: 129.732 
});
```

**–ö –∫–ª–∏–µ–Ω—Ç—É:**
```javascript
socket.on('driver:location:update', (data) => {
  // data: { orderId, latitude, longitude }
});
```

---

## üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend (`.env`):
```env
DATABASE_URL=postgresql://user:pass@localhost:5432/yakgo
PORT=3001
JWT_SECRET=your-secret
TELEGRAM_BOT_TOKEN=123456:ABC-DEF...
FRONTEND_URL=http://localhost:9002
```

### Frontend (`.env.local`):
```env
NEXT_PUBLIC_API_URL=http://localhost:3001/api
NEXT_PUBLIC_WS_URL=http://localhost:3001
```

---

## ü§ñ Telegram Mini App

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run bot` –≤ backend
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Menu Button
5. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram ‚Üí –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é

---

## üìä –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —É—Å–ª—É–≥
- ‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤–æ–¥–∏—Ç–µ–ª—è–º–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –∫–∞—Ä—Ç–µ (WebSocket)
- ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –≤–æ–¥–∏—Ç–µ–ª—è–º
- ‚úÖ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å —Å –∫–æ—Ä–∑–∏–Ω–æ–π
- ‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏

---

## üöß –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å

- üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (YooMoney/–ÆKassa)
- ‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã
- üí¨ –ß–∞—Ç –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–º
- üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram Bot API
- üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ (S3/Cloudinary)
- üìä –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ

---

## üéØ Production deployment

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:

- **Frontend**: Vercel (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- **Backend**: Railway (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier)
- **Database**: Railway PostgreSQL

### –®–∞–≥–∏:

1. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ backend –Ω–∞ Railway
2. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ frontend –Ω–∞ Vercel
3. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –û–±–Ω–æ–≤–∏—Ç–µ Menu Button URL –≤ @BotFather –Ω–∞ production URL
5. –ì–æ—Ç–æ–≤–æ! üéâ

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ë–µ–∑ –ø–∞—Ä–æ–ª–µ–π** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram
2. **Real-time** - WebSocket –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è
3. **Full-stack TypeScript** - –û—Ç frontend –¥–æ backend
4. **Type-safe** - Prisma ORM —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–∏–ø–æ–≤
5. **Telegram-native** - Mini App –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã:
1. –°–º. [INSTALLATION.md](./INSTALLATION.md)
2. –°–º. [backend/README.md](./backend/README.md)
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ GitHub

---

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

–£–¥–∞—á–∏ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ YakGo!
