# –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π YakGo –Ω–∞ Vercel

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é **–≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞** (Frontend + Backend + Database) –Ω–∞ Vercel.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –æ Vercel

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:**
- ‚úÖ Next.js Frontend (–æ—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Vercel)
- ‚úÖ Serverless API —Ñ—É–Ω–∫—Ü–∏–∏ (RESTful API)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π CDN
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–ø–ª–æ–∏ –∏–∑ GitHub

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è Backend:**
- ‚ùå **WebSocket –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** (Vercel = serverless, –Ω–µ—Ç –¥–æ–ª–≥–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- ‚è±Ô∏è –¢–∞–π–º–∞—É—Ç —Ñ—É–Ω–∫—Ü–∏–π: 10 —Å–µ–∫—É–Ω–¥ (Hobby), 60 —Å–µ–∫—É–Ω–¥ (Pro)
- üì¶ –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (cold start ~1-2 —Å–µ–∫—É–Ω–¥—ã)

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –¥–ª—è YakGo:**
- ‚úÖ REST API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùå **Real-time —á–∞—Ç —á–µ—Ä–µ–∑ WebSocket –ù–ï –†–ê–ë–û–¢–ê–ï–¢** (–Ω—É–∂–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- ‚ùå **Real-time –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è –ù–ï –†–ê–ë–û–¢–ê–ï–¢** (–Ω—É–∂–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ Vercel

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram Mini App     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                ‚îÇ
    ‚Üì                ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇFrontend ‚îÇ    ‚îÇBackend (API) ‚îÇ
‚îÇNext.js  ‚îÇ    ‚îÇServerless Fn ‚îÇ
‚îÇVercel   ‚îÇ    ‚îÇVercel        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚Üì                ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇPostgreSQL‚îÇ    ‚îÇTelegram Bot ‚îÇ
        ‚îÇSupabase  ‚îÇ    ‚îÇ   API       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Backend –¥–ª—è Vercel

### 1.1 –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Vercel

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `vercel.json`:

```bash
cd ~/studio
```

```json
{
  "version": 2,
  "builds": [
    {
      "src": "backend/src/index.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "backend/src/index.ts"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  }
}
```

### 1.2 –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ Backend –ø–æ–¥ Serverless

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `backend/vercel.json`:

```json
{
  "version": 2,
  "builds": [
    {
      "src": "src/index.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "src/index.ts"
    }
  ]
}
```

### 1.3 –û–±–Ω–æ–≤–∏—Ç–µ package.json –¥–ª—è Vercel

–í `backend/package.json` –¥–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã:

```json
{
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js",
    "vercel-build": "prisma generate && tsc"
  }
}
```

### 1.4 –ò–∑–º–µ–Ω–∏—Ç–µ index.ts –¥–ª—è serverless

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** WebSocket –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Vercel. –ù—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Socket.IO.

–û—Ç–∫—Ä–æ–π—Ç–µ `backend/src/index.ts` –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ WebSocket –∫–æ–¥:

```typescript
// backend/src/index.ts

import express from 'express';
import cors from 'cors';
// import { Server } from 'socket.io'; // ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ
// import http from 'http'; // ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ

const app = express();

// ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ HTTP —Å–µ—Ä–≤–µ—Ä–∞
// const server = http.createServer(app);

// ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ Socket.IO
// const io = new Server(server, {
//   cors: { origin: process.env.FRONTEND_URL }
// });

// Middleware
app.use(cors());
app.use(express.json());

// Routes
app.use('/api/users', userRoutes);
app.use('/api/orders', orderRoutes);
// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ routes

// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok' });
});

// ‚úÖ –î–ª—è Vercel —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ app, –∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä
export default app;

// ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
// const PORT = process.env.PORT || 3001;
// server.listen(PORT, () => {
//   console.log(`Server running on port ${PORT}`);
// });
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è real-time —Ñ—É–Ω–∫—Ü–∏–π:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **polling** (–∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫—É–Ω–¥)
- –ò–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ **Pusher** / **Ably** –¥–ª—è WebSocket (–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã)

---

## –®–∞–≥ 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL (Supabase)

### 2.1 –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Supabase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com/
2. **Sign in with GitHub**
3. **New project**

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- **Name:** `yakgo-db`
- **Database Password:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å
- **Region:** `Southeast Asia (Singapore)`
- **Pricing Plan:** `Free` (500 MB)

4. –ù–∞–∂–º–∏—Ç–µ **Create new project** (2-3 –º–∏–Ω—É—Ç—ã)

### 2.2 –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. **Settings** ‚Üí **Database**
2. **Connection string** ‚Üí **URI**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É:

```
postgresql://postgres:[YOUR-PASSWORD]@db.xxxxxx.supabase.co:5432/postgres
```

### 2.3 –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```bash
cd ~/studio/backend

# –°–æ–∑–¥–∞–π—Ç–µ .env
cat > .env << 'EOF'
DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@db.xxx.supabase.co:5432/postgres"
EOF

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run prisma:push

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm run prisma:seed
```

---

## –®–∞–≥ 3: –î–µ–ø–ª–æ–π Backend –Ω–∞ Vercel

### 3.1 –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ Vercel

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://vercel.com/
2. **Sign up** ‚Üí **Continue with GitHub**

### 3.2 –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

1. **Add New...** ‚Üí **Project**
2. –ù–∞–π–¥–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `studio`
3. **Import**

### 3.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Backend –ø—Ä–æ–µ–∫—Ç

**–í–∞–∂–Ω–æ:** Vercel –¥–æ–ª–∂–µ–Ω –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å **—Ç–æ–ª—å–∫–æ backend**, –∞ –Ω–µ –≤–µ—Å—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- **Project Name:** `yakgo-backend`
- **Framework Preset:** `Other`
- **Root Directory:** `backend` ‚ö†Ô∏è **–í–ê–ñ–ù–û!**
- **Build Command:** `npm run vercel-build`
- **Output Directory:** (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)
- **Install Command:** `npm install`

### 3.4 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Backend

–í —Ä–∞–∑–¥–µ–ª–µ **Environment Variables** –¥–æ–±–∞–≤—å—Ç–µ:

```env
# Database (Supabase)
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@db.xxx.supabase.co:5432/postgres

# Server
NODE_ENV=production

# JWT Secret (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É)
JWT_SECRET=–≤–∞—à_—Å—É–ø–µ—Ä_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞

# Telegram Bot
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
TELEGRAM_BOT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç

# Frontend URL (–æ–±–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è frontend)
FRONTEND_URL=https://temp-url.vercel.app

# –ÆKassa
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key
```

**–ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JWT_SECRET:**
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

### 3.5 –î–µ–ø–ª–æ–π Backend

1. –ù–∞–∂–º–∏—Ç–µ **Deploy**
2. Vercel —Å–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç backend (3-5 –º–∏–Ω—É—Ç)
3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–ª—É—á–∏—Ç–µ URL: `https://yakgo-backend.vercel.app`

### 3.6 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É Backend

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://yakgo-backend.vercel.app/health
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `{"status":"ok"}`

---

## –®–∞–≥ 4: –î–µ–ø–ª–æ–π Frontend –Ω–∞ Vercel

### 4.1 –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è Frontend

1. **Add New...** ‚Üí **Project**
2. –°–Ω–æ–≤–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `studio`
3. **Import**

### 4.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Frontend –ø—Ä–æ–µ–∫—Ç

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- **Project Name:** `yakgo` (–∏–ª–∏ `yakgo-app`)
- **Framework Preset:** `Next.js` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **Root Directory:** `./ ` (–∫–æ—Ä–µ–Ω—å, –Ω–µ backend!)
- **Build Command:** `npm run build` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **Output Directory:** `.next` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **Install Command:** `npm install`

### 4.3 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Frontend

```env
# Backend API (–≤–∞—à URL —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞)
NEXT_PUBLIC_API_URL=https://yakgo-backend.vercel.app/api
NEXT_PUBLIC_WS_URL=https://yakgo-backend.vercel.app

# 2GIS API Key
NEXT_PUBLIC_2GIS_API_KEY=–≤–∞—à_–∫–ª—é—á_2gis

# AI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
OLLAMA_ENABLED=false
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å 2GIS API Key:**
1. https://dev.2gis.ru/
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

### 4.4 –î–µ–ø–ª–æ–π Frontend

1. –ù–∞–∂–º–∏—Ç–µ **Deploy**
2. Vercel —Å–æ–±–µ—Ä–µ—Ç Next.js (3-5 –º–∏–Ω—É—Ç)
3. –ü–æ–ª—É—á–∏—Ç–µ URL: `https://yakgo.vercel.app`

### 4.5 –û–±–Ω–æ–≤–∏—Ç–µ FRONTEND_URL –≤ Backend

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–æ–µ–∫—Ç **yakgo-backend**
2. **Settings** ‚Üí **Environment Variables**
3. –ò–∑–º–µ–Ω–∏—Ç–µ `FRONTEND_URL`:
   ```
   FRONTEND_URL=https://yakgo.vercel.app
   ```
4. **Redeploy** backend (Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç)

---

## –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### 5.1 –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. `/newbot`
3. **–ò–º—è:** `YakGo`
4. **Username:** `YakGoBot` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω**

### 5.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Mini App

```
/newapp
# –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
# –ù–∞–∑–≤–∞–Ω–∏–µ: YakGo
# –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–º–æ—â—å –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö –Ø–∫—É—Ç–∏–∏
# –§–æ—Ç–æ: –∑–∞–≥—Ä—É–∑–∏—Ç–µ (640x640px)
# Short name: yakgo
# Web App URL: https://yakgo.vercel.app
```

### 5.3 –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ Backend

1. **yakgo-backend** ‚Üí **Settings** ‚Üí **Environment Variables**
2. –ò–∑–º–µ–Ω–∏—Ç–µ `TELEGRAM_BOT_TOKEN` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
3. **Redeploy**

---

## –®–∞–≥ 6: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å WebSocket (Real-time —Ñ—É–Ω–∫—Ü–∏–∏)

### –í–∞—Ä–∏–∞–Ω—Ç 1: Polling (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Vercel)

–í–º–µ—Å—Ç–æ WebSocket –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã:

**–î–ª—è —á–∞—Ç–∞:**
```typescript
// Frontend: –æ–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ API –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
useEffect(() => {
  const interval = setInterval(async () => {
    const messages = await fetch(`/api/chat/${orderId}/messages`);
    // –û–±–Ω–æ–≤–∏—Ç–µ UI
  }, 5000); // –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

  return () => clearInterval(interval);
}, [orderId]);
```

**–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è:**
```typescript
// –û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–æ–∑–∏—Ü–∏—é –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
useEffect(() => {
  const interval = setInterval(async () => {
    const location = await fetch(`/api/orders/${orderId}/driver-location`);
    // –û–±–Ω–æ–≤–∏—Ç–µ –∫–∞—Ä—Ç—É
  }, 10000);

  return () => clearInterval(interval);
}, [orderId]);
```

**–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π endpoint –≤ backend:**

```typescript
// backend/src/controllers/orders.controller.ts

export async function getDriverLocation(req: AuthRequest, res: Response) {
  const { id } = req.params;

  const order = await prisma.order.findUnique({
    where: { id },
    select: {
      driverLocation: true,
      updatedAt: true
    }
  });

  res.json({ location: order?.driverLocation, timestamp: order?.updatedAt });
}

// –î–æ–±–∞–≤—å—Ç–µ –≤ routes:
// GET /api/orders/:id/driver-location
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Pusher (–ü–ª–∞—Ç–Ω—ã–π, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://pusher.com/
2. –°–æ–∑–¥–∞–π—Ç–µ app (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 200k —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å)
3. –ü–æ–ª—É—á–∏—Ç–µ credentials
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```bash
# Backend
npm install pusher

# Frontend
npm install pusher-js
```

**Backend:**
```typescript
import Pusher from 'pusher';

const pusher = new Pusher({
  appId: process.env.PUSHER_APP_ID,
  key: process.env.PUSHER_KEY,
  secret: process.env.PUSHER_SECRET,
  cluster: process.env.PUSHER_CLUSTER
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
await pusher.trigger(`chat-${orderId}`, 'new-message', { message });
```

**Frontend:**
```typescript
import Pusher from 'pusher-js';

const pusher = new Pusher(process.env.NEXT_PUBLIC_PUSHER_KEY, {
  cluster: 'eu'
});

const channel = pusher.subscribe(`chat-${orderId}`);
channel.bind('new-message', (data) => {
  // –û–±–Ω–æ–≤–∏—Ç—å UI
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Supabase Realtime (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)

Supabase –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç real-time —Ñ—É–Ω–∫—Ü–∏–∏:

```typescript
// Frontend
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ Message
supabase
  .channel('messages')
  .on('postgres_changes',
    { event: 'INSERT', schema: 'public', table: 'Message' },
    (payload) => {
      // –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      console.log(payload.new);
    }
  )
  .subscribe();
```

---

## –®–∞–≥ 7: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 7.1 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Git Integration

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç CI/CD:

```bash
# –õ—é–±–æ–π push –≤ main ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
git add .
git commit -m "Update feature"
git push origin main

# Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –û–±–Ω–∞—Ä—É–∂–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç build
# 3. –ó–∞–¥–µ–ø–ª–æ–∏—Ç –Ω–∞ production
```

### 7.2 Preview Deployments

–ö–∞–∂–¥–∞—è –≤–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–µ—Ç preview URL:

```bash
git checkout -b feature/new-chat
git push origin feature/new-chat

# Vercel —Å–æ–∑–¥–∞—Å—Ç:
# https://yakgo-git-feature-new-chat-username.vercel.app
```

---

## –®–∞–≥ 8: –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 8.1 –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ Vercel

**–î–ª—è Frontend:**
1. **yakgo** project ‚Üí **Settings** ‚Üí **Domains**
2. –î–æ–±–∞–≤—å—Ç–µ: `app.yourdomain.com`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS:

```
Type: CNAME
Name: app
Value: cname.vercel-dns.com
TTL: 3600
```

**–î–ª—è Backend:**
1. **yakgo-backend** project ‚Üí **Settings** ‚Üí **Domains**
2. –î–æ–±–∞–≤—å—Ç–µ: `api.yourdomain.com`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS:

```
Type: CNAME
Name: api
Value: cname.vercel-dns.com
TTL: 3600
```

4. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø—É—Å—Ç–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### 8.2 –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Frontend:**
```env
NEXT_PUBLIC_API_URL=https://api.yourdomain.com/api
NEXT_PUBLIC_WS_URL=https://api.yourdomain.com
```

**Backend:**
```env
FRONTEND_URL=https://app.yourdomain.com
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### Vercel Dashboard

1. **Deployments** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–ø–ª–æ–π
2. **Function Logs** - –ª–æ–≥–∏ serverless —Ñ—É–Ω–∫—Ü–∏–π
3. **Build Logs** - –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏

### Supabase

1. **Database** ‚Üí **Logs**
2. **Database** ‚Üí **Reports** (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

### Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Vercel Analytics:

1. **Project Settings** ‚Üí **Analytics**
2. **Enable Analytics** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ Hobby)

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –õ–∏–º–∏—Ç—ã Vercel Free (Hobby)

| –†–µ—Å—É—Ä—Å | –õ–∏–º–∏—Ç |
|--------|-------|
| Bandwidth | 100 GB/–º–µ—Å—è—Ü |
| Serverless Function Execution | 100 GB-Hrs/–º–µ—Å—è—Ü |
| Deployments | 100/–¥–µ–Ω—å |
| –§—É–Ω–∫—Ü–∏–∏ timeout | 10 —Å–µ–∫—É–Ω–¥ |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è serverless

**1. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ cold starts:**
```typescript
// –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –≤–Ω—É—Ç—Ä—å —Ñ—É–Ω–∫—Ü–∏–π, –µ—Å–ª–∏ –æ–Ω–∏ —Ç—è–∂–µ–ª—ã–µ
export async function handler(req, res) {
  const prisma = (await import('@prisma/client')).PrismaClient;
  // ...
}
```

**2. –ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Vercel Edge Config –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
import { get } from '@vercel/edge-config';

const cachedData = await get('key');
```

**3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Edge Functions –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏:**
```typescript
// vercel.json
{
  "functions": {
    "api/users": {
      "runtime": "edge"
    }
  }
}
```

---

## Troubleshooting

### Backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** 500 Internal Server Error

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Function Logs –≤ Vercel
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ Environment Variables —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (`npm run vercel-build`)

### WebSocket –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** WebSocket connection failed

**–†–µ—à–µ–Ω–∏–µ:**
- WebSocket –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ Vercel
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ polling –∏–ª–∏ Pusher (—Å–º. –®–∞–≥ 6)

### Database connection timeout

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ Vercel Environment Variables
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Supabase –±–∞–∑–∞ –∞–∫—Ç–∏–≤–Ω–∞ (–Ω–µ –Ω–∞ –ø–∞—É–∑–µ)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Å—Ç—Ä–æ–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `?sslmode=require`

### Cold start –º–µ–¥–ª–µ–Ω–Ω—ã–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ –ø—Ä–æ—Å—Ç–æ—è –º–µ–¥–ª–µ–Ω–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è serverless (1-2 —Å–µ–∫—É–Ω–¥—ã)
- Upgrade –¥–æ Vercel Pro –¥–ª—è faster cold starts
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ uptime –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø–∏–Ω–≥—É–µ—Ç –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

---

## –°—Ç–æ–∏–º–æ—Å—Ç—å

### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (Hobby)

```
Frontend Vercel:  $0
Backend Vercel:   $0
Supabase Free:    $0
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û:            $0/–º–µ—Å—è—Ü
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- 100 GB bandwidth
- 10 —Å–µ–∫—É–Ω–¥ timeout —Ñ—É–Ω–∫—Ü–∏–π
- –ù–µ—Ç WebSocket
- Cold starts

### Vercel Pro ($20/–º–µ—Å)

```
Vercel Pro:       $20/–º–µ—Å
Supabase Pro:     $25/–º–µ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û:            $20-45/–º–µ—Å—è—Ü
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- 1 TB bandwidth
- 60 —Å–µ–∫—É–Ω–¥ timeout
- Faster cold starts
- Team collaboration

---

## –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –≤ Supabase
- [ ] ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] ‚úÖ Backend –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω (WebSocket –æ—Ç–∫–ª—é—á–µ–Ω)
- [ ] ‚úÖ Backend –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Vercel
- [ ] ‚úÖ Frontend –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Vercel
- [ ] ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤–µ–∑–¥–µ
- [ ] ‚úÖ FRONTEND_URL –æ–±–Ω–æ–≤–ª–µ–Ω –≤ backend
- [ ] ‚úÖ Telegram Bot —Å–æ–∑–¥–∞–Ω
- [ ] ‚úÖ Mini App –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] ‚úÖ Health check —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] ‚úÖ API endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram
- [ ] ‚ö†Ô∏è Real-time —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ polling

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Hybrid –ø–æ–¥—Ö–æ–¥

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ WebSocket:

**–í–∞—Ä–∏–∞–Ω—Ç 1:**
- Frontend ‚Üí Vercel
- Backend REST API ‚Üí Vercel
- **WebSocket —Å–µ—Ä–≤–µ—Ä ‚Üí Render.com** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- Database ‚Üí Supabase

**–í–∞—Ä–∏–∞–Ω—Ç 2:**
- Frontend ‚Üí Vercel
- Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí Railway ($5/–º–µ—Å—è—Ü)
- Database ‚Üí Railway (–≤–∫–ª—é—á–µ–Ω–æ)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Vercel Dashboard](https://vercel.com/dashboard)
- [Vercel Docs](https://vercel.com/docs)
- [Supabase Dashboard](https://app.supabase.com/)
- [Supabase Realtime Docs](https://supabase.com/docs/guides/realtime)
- [Pusher](https://pusher.com/)

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - Vercel ‚Üí Deployments ‚Üí Function Logs
   - Supabase ‚Üí Database ‚Üí Logs

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –í—Å–µ –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã?
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è?

3. **–°–æ–∑–¥–∞–π—Ç–µ issue:**
   - https://github.com/Fakesuka/studio/issues

**–£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel! üöÄ**
